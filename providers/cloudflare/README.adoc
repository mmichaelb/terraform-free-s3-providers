== Cloudflare R2

=== Usage

The following code snippet can be used.

[source,terraform]
----
module "cloudflare" {
  source      = "github.com/mmichaelb/terraform-free-s3-providers/providers/cloudflare"
  bucket_name = "my-bucket"
  account_id  = "<your account id>"
  region      = "WEUR"
}

provider "cloudflare" {
  api_token = "<your api key>"
}
----

=== Credentials

You have to create a new API token following this tutorial: https://developers.cloudflare.com/fundamentals/api/get-started/create-token/[]. You have to *select the template "Create Additional Tokens"* in order for the token to be usable. The token needs the following permissions:

* User's Account - `Workers R2 Storage:Edit`
* All users - `API Tokens:Edit`

Furthermore, you need to retrieve the account id of your account (the account, the Bucket should be created in). See this tutorial for further assistance: https://developers.cloudflare.com/fundamentals/setup/find-account-and-zone-ids/

<!-- BEGIN_TF_DOCS -->
== Requirements

[cols="a,a",options="header,autowidth"]
|===
|Name |Version
|[[requirement_terraform]] <<requirement_terraform,terraform>> |>= 1.0.0
|[[requirement_cloudflare]] <<requirement_cloudflare,cloudflare>> |>= 5.0.0
|===

== Providers

[cols="a,a",options="header,autowidth"]
|===
|Name |Version
|[[provider_cloudflare]] <<provider_cloudflare,cloudflare>> |>= 5.0.0
|===

== Modules

No modules.

== Resources

[cols="a,a",options="header,autowidth"]
|===
|Name |Type
|https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token[cloudflare_api_token.access] |resource
|https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token[cloudflare_api_token.management] |resource
|https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/r2_bucket[cloudflare_r2_bucket.bucket] |resource
|https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/data-sources/api_token_permission_groups_list[cloudflare_api_token_permission_groups_list.all] |data source
|===

== Inputs

[cols="a,a,a,a,a",options="header,autowidth"]
|===
|Name |Description |Type |Default |Required
|[[input_account_id]] <<input_account_id,account_id>>
|The ID of the account that the bucket will be created in (see https://developers.cloudflare.com/fundamentals/setup/find-account-and-zone-ids/).
|`string`
|n/a
|yes

|[[input_add_management_key]] <<input_add_management_key,add_management_key>>
|Whether to add a management key to manage the bucket (list and delete).
|`bool`
|`false`
|no

|[[input_bucket_name]] <<input_bucket_name,bucket_name>>
|The name of the bucket to create.
|`string`
|n/a
|yes

|[[input_region]] <<input_region,region>>
|The region to create the bucket in.
|`string`
|n/a
|yes

|===

== Outputs

[cols="a,a",options="header,autowidth"]
|===
|Name |Description
|[[output_access_key_id]] <<output_access_key_id,access_key_id>> |n/a
|[[output_bucket_name]] <<output_bucket_name,bucket_name>> |n/a
|[[output_endpoint_url]] <<output_endpoint_url,endpoint_url>> |n/a
|[[output_management_access_key_id]] <<output_management_access_key_id,management_access_key_id>> |n/a
|[[output_management_secret_access_key]] <<output_management_secret_access_key,management_secret_access_key>> |n/a
|[[output_profile_name]] <<output_profile_name,profile_name>> |n/a
|[[output_region]] <<output_region,region>> |n/a
|[[output_secret_access_key]] <<output_secret_access_key,secret_access_key>> |n/a
|===
<!-- END_TF_DOCS -->